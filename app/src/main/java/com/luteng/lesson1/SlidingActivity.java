package com.luteng.lesson1;

import android.support.v4.view.ViewCompat;
import android.support.v4.widget.SlidingPaneLayout;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.LinearLayout;

public class SlidingActivity extends AppCompatActivity implements SlidingPaneLayout.PanelSlideListener {
    private SlidingPaneLayout slidingPaneLayout;
    private FrameLayout view;
    private LinearLayout menu;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sliding);
        slidingPaneLayout = (SlidingPaneLayout) findViewById(R.id.sliding);
        view = (FrameLayout) findViewById(R.id.sliding_content);
        menu = (LinearLayout) findViewById(R.id.menu);
//        Log.d("SlidingActivity", "width = " + view.getWidth());
        //打开和关闭
        slidingPaneLayout.closePane();
        slidingPaneLayout.openPane();
        //滑动监听
        slidingPaneLayout.setPanelSlideListener(this);
    }

    /**
     * 滑动中
     * @param panel
     * @param slideOffset
     */
    @Override
    public void onPanelSlide(View panel, float slideOffset) {
        //设置锚点，默认锚点在中心点上

        ViewCompat.setPivotX(view,0);
        ViewCompat.setPivotY(view, view.getHeight() / 2);
        ViewCompat.setScaleX(view, 1 - slideOffset * 0.5f);
        ViewCompat.setScaleY(view, 1 - slideOffset * 0.5f);
        ViewCompat.setTranslationX(menu,-menu.getWidth()/2*(1-slideOffset));
        Log.d("SlidingActivity", "slideOffset = "+slideOffset);

//        view.setPivotX(0);
//        view.setScaleX(1 - slideOffset * 0.5f);




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































//        view.setScaleY(1 - slideOffset * 0.5f);
//        Log.d("SlidingActivity", "width = " + view.getWidth());//宽度还是原来的

    }

    @Override
    public void onPanelOpened(View panel) {

    }

    @Override
    public void onPanelClosed(View panel) {

    }
}
